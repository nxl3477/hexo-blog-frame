---
title: ã€å·¥ç¨‹åŒ–ã€‘webpack5ä¸å®Œå…¨å°é²œ
date: 2019-09-15 17:40:18
categories: å·¥ç¨‹åŒ–
tags:  [webpack, å·¥ç¨‹åŒ–]
---




## å¦‚ä½•å®‰è£…webpack 5
> npm install webpack@next -D



## ðŸ“¦æ‰“åŒ…ä¸€ä¸‹
æˆ‘ä»¬è¿˜æ˜¯åŽ»å°è¯•æ‰“åŒ…è¿™æ ·ä¸€æ®µä»£ç 
![2019-09-15-17-44-55](http://img.nixiaolei.com/2019-09-15-17-44-55.png)

æœ€ç»ˆç”Ÿæˆ
```js
/******/ ((modules, runtime) => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId](module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/
/******/ 	// the startup function
/******/ 	function startup() {
/******/ 		// Load entry module and return exports
/******/ 		return __webpack_require__("./src/index.js");
/******/ 	};
/******/
/******/ 	// run startup
/******/ 	return startup();
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! exports [maybe provided (runtime-defined)] [no usage info] */
/*! runtime requirements:  */
/***/ (() => {

eval("console.log(\"ä½ å¥½ï¼Œwebpack\")\n\n//# sourceURL=webpack:///./src/index.js?");

/***/ })

/******/ });
```

æ˜¯ä¸æ˜¯æ¯”webpack4 å°‘äº†å¥½å¤š
> webpack4 å…·ä½“æƒ…å†µå¯ä»¥å‚è€ƒ ç«™å†…æ–‡ç«  `ã€å·¥ç¨‹åŒ–ã€‘webpack-ç¼–è¯‘åŽæ–‡ä»¶è§£æž`

å°‘åŽ»äº†ä¸€å¤§å¨çš„æ¶å¿ƒä»£ç ï¼

è¿™æ˜¯å› ä¸ºï¼š

> webpack5æ”¾å¼ƒäº†å¯¹å…¼å®¹åšå¤„ç†çš„ç›¸å…³ä»£ç ï¼Œ è½¬è€Œäº¤ç»™ç”¨æˆ·åŽ»åšï¼Œ ä»¥æ­¤å°†å…¶ä»£ç é‡å‡å°‘ä¸ºä¹‹å‰çš„ä¸‰åˆ†ä¹‹ä¸€ä¸åˆ°


## å›ºå®šçš„id
> å¤©ä¸‹è‹¦moduleIds å’Œ chunkIds å·²ä¹…

åœ¨webpack4 çš„æ—¶å€™ï¼Œ æˆ‘ä»¬çš„å¼‚æ­¥ chunkId å’ŒmoduleId ä¸€ç›´æ˜¯ä¸€ä¸ªå¤§é—®é¢˜ï¼Œ ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Œ 

åœ¨æ­¤ä¹‹å‰çš„å„ç§ id å¦‚ä¸‹: 

![2019-09-15-22-12-09](http://img.nixiaolei.com/2019-09-15-22-12-09.png)

natural , size ä¸€èˆ¬ä¼šç”¨åœ¨æˆ‘ä»¬çš„åŠ¨æ€å¼•å…¥çš„å¼‚æ­¥ç»„ä»¶ä¸Šï¼Œ natural æ˜¯è‡ªç„¶æ•°ï¼Œ size æ˜¯å°ºå¯¸å¤§å°ï¼Œ ä¸€èˆ¬åŠ¨æ€æ–‡ä»¶éƒ½ä¼šå˜æˆè¿™æ ·: `0.js`, `1.js`,  çœ‹ä¼¼å¾ˆå®Œç¾Žçš„ä¸œè¥¿, å®žé™…ä¸Šï¼Œ ä¼šå¸¦æ¥ä¸€äº›é—®é¢˜

1. ä¸ç®¡æ˜¯ natural è¿˜æ˜¯ size , å½“ä¸€ä¸ªç»„ä»¶æ¨¡å—è¢«æ”¹å˜æ—¶å°±ä¼šå½±å“åˆ°å…¶ä»–çš„æ¨¡å—çš„id,  æ¯”å¦‚: ä¸€å¼€å§‹æœ‰a.js , b.js, c.js å¯¹åº” 0.js , 1.js ,2.js  ,ä½†æ˜¯åŽæ¥æˆ‘ä»¬ä¸éœ€è¦a.js äº†ï¼Œ é‚£çŽ°åœ¨å°±å˜æˆäº†: b.js , c.js å¯¹åº” 0.js , 1.jsã€‚
2. 1âƒ£ï¸æ‰€è¯´çš„id æ‰€å¸¦æ¥çš„æ”¹å˜ï¼Œ éšä¹‹è€Œæ¥çš„å½±å“å°±æ˜¯é€ æˆç½‘ç«™ç¼“å­˜çš„æŠ¥åºŸï¼Œ ä¹Ÿå°±æ˜¯è¯´ä¹‹å‰ç”¨æˆ·è¾›è‹¦åŠ è½½çš„ç¼“å­˜æ²¡æœ‰ç”¨äº†ï¼Œ å¹¶ä¸”æ˜¯å…¨éƒ¨æŠ¥åºŸï¼Œ ä¸€ä¸ªæ–‡ä»¶çš„æ”¹åŠ¨å½±å“åˆ°å…¨éƒ¨ï¼Œ æ•´ä¸ªä»£ä»·å¤ªå¤§äº†ã€‚ 
3. æ›´æœ‰ï¼Œç”šè‡³å¯èƒ½ä¼šé€ æˆæ–‡ä»¶çš„å¼•ç”¨é”™è¯¯ï¼Œ å› ä¸ºä¹‹å‰0.js å¯¹åº”çš„æ˜¯ a.js , 1.js å¯¹åº”çš„ b.js , çŽ°åœ¨å˜äº† 0.js å¯¹åº”äº† b.js, 1.js å¯¹åº”äº† c.js, æµè§ˆå™¨ç›´æŽ¥èµ°ç¼“å­˜ èŽ·å–åˆ°è¿™ä»½js æ–‡ä»¶ï¼Œ å°±æ˜¯å¼•é”™æ–‡ä»¶äº†ï¼Œ é‚£é¡¹ç›®ä¸ä¹…ç‚¸äº†


åœ¨webpack4 æ—¶æœŸçš„æ›²çº¿æ•‘å›½æ–¹æ¡ˆï¼š

> ä½¿ç”¨é­”æ³•æ³¨é‡Šæ¥å‘Šè¯‰webpack è¿™ä¸ªå¼‚æ­¥ç»„ä»¶åº”è¯¥å«ä»€ä¹ˆåå­—

è¿™ç¡®å®žæ˜¯ä¸€ä¸ªè§£å†³åŠžæ³•ï¼Œ ä½†æ˜¯å¾ˆéº»çƒ¦ï¼Œ å¤§ç‚¹çš„é¡¹ç›®åŠ¨åˆ™ä¸Šç™¾ä¸ªç»„ä»¶ï¼Œ ä¸€ä¸ªä¸€ä¸ªç»´æŠ¤æˆæœ¬å®žåœ¨æœ‰ç‚¹å¤§ï¼Œ è€Œä¸”åŽæœŸçš„ä¿®æ”¹éƒ½å¾—æ³¨æ„ï¼Œ æ‰€ä»¥ï¼Œ è™½ç„¶æœ‰ç”¨ï¼Œ ä½†æ˜¯ä¸å¥½ç”¨


### webpack5 çš„ç¦éŸ³
> è¯¥æ–¹æ³•çš„åŽŸç†æ˜¯é€šè¿‡åˆ†æžæ–‡ä»¶ï¼Œ æ¥äº§ç”Ÿçš„ç®€ç‰ˆmd5

webpack5 å¸¦æ¥äº†ä¸€ä¸ªæ–°çš„chunkId çš„å®žçŽ°æ–¹å¼ `deterministic` , 

```js
module.exports = {
  optimization:{
    chunkIds: "deterministicâ€,
    moduleIds: "deterministic"   
  }
}
```
åªéœ€è¦è¿™æ ·ï¼Œ å°±å¯ä»¥ç”Ÿæˆé’ˆå¯¹è¯¥æ–‡ä»¶çš„å”¯ä¸€chunkId, å¤ªæ£’å•¦

![2019-09-15-22-35-45](http://img.nixiaolei.com/2019-09-15-22-35-45.png)


## æ›´å¥½çš„ç¼“å­˜

å¦‚ä¸‹å½“ä½¿ç”¨æŒä¹…ç¼“å­˜æ—¶ï¼Œä¸å†éœ€è¦cache-loaderã€‚ å¯¹äºŽ babel cacheDirectory ç­‰ä¹Ÿæ˜¯å¦‚æ­¤ã€‚

```js
module.exports = {
    cache: {
        type: "filesystem"
    }
}
```


å‚è€ƒæ–‡çŒ®:
> https://juejin.im/post/5c8761925188251a0844d3a4